# fmm-lung-nodule-segmentation

\subsection{Credits and original work}
\addcontentsline{toc}{section}{Credits and original work}
In this section the ideas, techniques, algorithms and code, which were used for this work are listed. Some of these are original  and some built upon existing work as a foundation. Most of the plots and figures were created with the help of the Matplotlib library \cite{hunter2007matplotlib}.
\begin{itemize}
    \item Preprocessing: for this part, several techniques and code were used from two separate solutions to the preprocessing part of the Lung Nodule Analysis 2016 (LUNA16) challenge \cite{preprocesstutorial} \cite{candidategeneration}.
    \begin{itemize}
        \item Loading the DICOM files, resampling and normalising the final results were performed using code from \cite{preprocesstutorial}.
        \item Segmentation of the lungs' area was performed using and modifying the code from \cite{candidategeneration}, with the substituiton of the binary closure step with the convex hull, giving better results in areas where there are juxtapleaural nodules.
        \item Importing the annotations and cropping the nodules was done with original code.
    \end{itemize}
    \item Fast Marching Method implementation: for this part most of the code was written from the ground up, except for the use of some functions from Python image processing libraries. Several techniques were designed taking inspiration from already existing work.
    \begin{itemize}
        \item  For the FMM preparation, the smoothing and gradient magnitude were performed with functions from the SimpleITK library \cite{simpleITK}. The seed grid generation method draws heavily from \cite{Hearn2008COMPETITIVEMI}, where an automatic initialisation for the seeds is proposed based on statistical analysis. A similar method was designed that makes use of the image gradient and uses a kindred shifting technique, the implementation was done with original code. The padding scheme which improves performance for juxtapleureal nodules was an original idea. 
        \item FMM was implemented by writing the code completely from the beginning, by following the algorithm as described by J.A. Sethian in \cite{SethianFMM}. For the addition of region assigning to multiple fronts the idea from \cite{sifakis} was implemented, where a new region growing method is proposed for segmenting images using a  multi-label fast marching algorithm.
        \item  The scikit-learn Python library \cite{sklearn} library was used to execute K-means, and cluster merging was carried with an often used criteria for region growing, for which the recursive algorithm was implemented from the ground up. The trackbars were added using functions from the matplotlib library. 
    \end{itemize}
    \item Evaluation: for this part most of the code was written from the ground up, except for the use of some basic functions from Python image processing libraries, and for the Matlab \cite{MATLAB:2020} implementation of active contours. Several techniques were designed taking inspiration from already existing concepts.
    \begin{itemize}
        \item For the comparison method the \textit{activecontours} function was used from Matlab as is, without making any significant modifications.
        \item For the subjective evaluation the questionnaires were written from scratch keeping in mind that the radiologists task and the scoring system should be well defined. To extract the data from the completed forms the PyPDF2 Python toolkit \cite{py2pdf} was used. 
        \item For the objective evaluation the phantom dataset was generated by using image processing tools from GIMP. Implementing the evaluation metrics was done writing original code by following the definitions of both IoU and long-axis/short-axis diameter measure.
    \end{itemize}
\end{itemize}
